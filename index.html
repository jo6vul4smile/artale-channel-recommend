<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>é »é“æ¨è–¦ç³»çµ±</title>
</head>
<body>
  <h1>ğŸ¯ ARTALE é »é“æ¨è–¦å™¨</h1>
  <p>è¼¸å…¥ä½ çš„å‡ºç”Ÿå¹´æœˆæ—¥ï¼Œå³å¯ç²å¾—ä»Šæ—¥å¹¸é‹é »é“èˆ‡è¡æ²å»ºè­°</p>
  <input type="date" id="birthdate" />
  <button onclick="recommendChannel()">ç²å¾—æ¨è–¦</button>
  <div id="result"></div>
  <script>
    async function recommendChannel() {
      const birth = document.getElementById("birthdate").value;
      const date = new Date(birth);
      if (isNaN(date.getTime())) {
        document.getElementById("result").innerText = "â— è«‹æ­£ç¢ºè¼¸å…¥ç”Ÿæ—¥ (æ ¼å¼: YYYY-MM-DD)";
        return;
      }

      const today = new Date().toISOString().split("T")[0];
      const response = await fetch("config.json");
      const config = await response.json();
      const daily = config[today] || {};

      const mainChannels = (daily.recommendedChannels || {}).default || [];
      const altChannels = (daily.recommendedChannels || {}).fallback || [];
      const zodiac = daily.zodiac || "æœªçŸ¥";
      const horoscope = daily.horoscope || "æœªçŸ¥";
      const tail = daily.tail || [];
      const tang = daily.tang || "";
      const grindTime = daily.grindTime || "";
      const detail = (daily.horoscopes || {})[horoscope] || "";

      document.getElementById("result").innerHTML = `
        ğŸ”® <b>ç”Ÿè‚–ï¼š</b>${zodiac}<br>
        ğŸŒŒ <b>æ˜Ÿåº§ï¼š</b>${horoscope}<br><br>
        ğŸ“¡ <b>æ¨è–¦é »é“ï¼š</b>${mainChannels.join("ã€")}<br>
        âœ¨ å‚™é¸é »é“ï¼š${altChannels.join("ã€")}<br>
        ğŸ”¢ å°¾è™Ÿæ¨è–¦ï¼š${tail.join("ã€")}<br><br>
        ğŸ“œ <b>è¡æ²å»ºè­°ï¼š</b>${detail}<br><br>
        ğŸ§™â€â™‚ï¸ <b>å”æ¥Šç¦è€å¸«ï¼š</b>${tang}<br>
        â° <b>åˆ·æ€ªæ™‚æ®µï¼š</b>${grindTime}
      `;
    }
  </script>
</body>
</html>